<%- include("./fragments/head") %>

<body>

  <%- include("./fragments/navbar") %>

  <h1>Egresos del mes</h1>

  <div>
    <a href="/egresos-del-mes/0">Enero</a>
    <a href="/egresos-del-mes/1">Febrero</a>
    <a href="/egresos-del-mes/2">Marzo</a>
    <a href="/egresos-del-mes/3">Abril</a>
    <a href="/egresos-del-mes/4">Mayo</a>
    <a href="/egresos-del-mes/5">Junio</a>
    <a href="/egresos-del-mes/6">Julio</a>
    <a href="/egresos-del-mes/7">Agosto</a>
    <a href="/egresos-del-mes/8">Septiembre</a>
    <a href="/egresos-del-mes/9">Octubre</a>
    <a href="/egresos-del-mes/10">Noviembre</a>
    <a href="/egresos-del-mes/11">Diciembre</a>
  </div>

  <table>
    <tr>
      <th>N°</th>
      <th>Día</th>
      <th>Categoría</th>
      <th>Monto</th>
      <th>Obs</th>
    </tr>

    <% if (egresos.length === 0) { %>
    <tr>
      <td colspan="5">No se registran egresos en este período</td>
    </tr>
    <% } else { %>
    <% for( let i = 0; i < egresos.length; i++ ) { %>
    <tr>
      <td><%= i + 1 %></td>
      <td><%= egresos[i].date %></td>
      <td><%= egresos[i].cat %></td>
      <td>$ <%= egresos[i].value %></td>
      <% if (egresos[i].obs === "") { %>
      <td>-</th>
        <% } else {%>
      <td><%= egresos[i].obs %></td>
      <% } %>
    </tr>
    <% } %>
    <% } %>
  </table>

  <% let totalegresos = []; %>
  <% egresos.forEach(monto => { %>
  <% totalegresos = [...totalegresos, monto.value]%>
  <% }) %>
  <% let resultado = totalegresos.reduce((prev, curr) => prev + curr, 0 )%>

  <p>Total de egresos: $ <span><%= resultado %></span></p>

  <%- include("./fragments/scripts") %>
</body>

</html>